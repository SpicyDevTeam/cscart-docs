***************************************
Настраиваем Google reCAPTCHA в магазине
***************************************

#. Откройте страницу **Модули → Управление модулями**.

#. Модуль :doc:`Google reCAPTCHA <index>` установлен по умолчанию, остается только его настроить. Нажмите на название модуля.

   .. fancybox:: img/google_recaptcha_addon.png
       :alt: Модуль Google reCAPTCHA в CS-Cart и Multi-Vendor.

#. Появится всплывающее окно с настройками модуля.

   *Примечания:*

       * Получить *Site key (Ключ сайта)* и *Secret (Секрет)* можно `на этой странице <https://www.google.com/recaptcha/admin>`_. Вам понадобится ввести доменное имя своего магазина; подробности можно узнать `в статье от Google <https://developers.google.com/recaptcha/docs/domain_validation?hl=ru>`_.
       
       * *Site key (Ключ сайта)* и *Secret (Секрет)* для **reCAPTCHA v2: Checkbox** и **reCAPTCHA v3** принимают разные значения, и получать их необходимо отдельно для каждой версии reCAPTCHA.  

       * Если у вас CS-Cart с несколькими витринами, и вы хотите использовать Google reCAPTCHA на всех, то вам понадобится только одна пара site key и secret. Просто укажите несколько доменов на стороне Google при создании site key и secret.

       * Если вы :doc:`встраиваете магазин на страницу Facebook </user_guide/look_and_feel/layouts/widget_mode/facebook_app>`, укажите ``widget.cart-services.com`` как один из доменов. Иначе reCAPTCHA не будет работать во встроенном магазине.

   * **Настройки reCAPTCHA v2:**

     * **Site key (Ключ сайта)** — один из двух обязательных реквизитов; нужен для отображения виджета reCAPTCHA в магазине.

     * **Secret (Секрет)** — один из двух обязательных реквизитов; магазин использует его, чтобы подключиться к серверу reCAPTCHA и проверить, является ли пользователь ботом. В целях безопасности Google рекомендует никому не сообщать свой secret.
       
     * **Оформление** — цвета виджета reCAPTCHA в вашем магазине. Можно выбрать *Светлое* (Light) или *Тёмное* (Dark) оформление. Примеры того, как виджет выглядит в разном оформлении, можно найти в `вопроснике по Google reCAPTCHA <https://developers.google.com/recaptcha/docs/faq#can-i-customize-the-recaptcha-widget>`_.

     * **Размер** — размер виджета reCAPTCHA в важем магазине. Можно выбрать *Обычный* или *Компактный* размер.

     * **Тип** — тип теста CAPTCHA, который будет предложен пользователю, если нужно дополнительное подтверждение, что пользователь — не бот. Тест может быть на распознавание изображений (*Изображение*) или звуковой (*Аудио*).

   * **Настройки reCAPTCHA v3:**
   
     * **Site key (Ключ сайта)** — один из двух обязательных реквизитов.

     * **Secret (Секрет)** — один из двух обязательных реквизитов; магазин использует его, чтобы подключиться к серверу reCAPTCHA и проверить, является ли пользователь ботом. В целях безопасности Google рекомендует никому не сообщать свой secret.
          
     * **Минимальный рейтинг, чтобы пройти проверку** — установите значение от *0.1* до *0.9*. Чем выше значение, тем строже проверка. Рекомендуемое значение для данного поля — *0.5*.
     
   * **Настройки защиты от ботов** — выберите, в каком месте вашего магазина и какую защиту от ботов вы хотите использовать. Вы можете использовать *reCAPTCHA v2: Checkbox* и *reCAPTCHA v3* одновременно в разных формах.

     * **Отключить антибот для авторизованных пользователей** — если поставить галочку, то пользователи, вошедшие в свою учетную запись, не будут проверяться. 

     * **Отключить антибот после первого правильного ответа** — если поставить галочку, то пользователю понадобится подтвердить, что он не бот, только один раз за сессию.
   
#. (опционально) На вкладке **Страны-исключения** выберите страны, где не будет использоваться Google reCAPTCHA.

#. Нажмите кнопку **Сохранить**.

   .. fancybox:: img/google_recaptcha_settings.png
       :alt: Настройки модуля Google reCAPTCHA.
