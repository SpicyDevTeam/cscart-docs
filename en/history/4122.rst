************************
CS-Cart 4.12.2 Changelog
************************

=============================
New Features and Improvements
=============================

[+] Add-ons: Banners: Data feeds: A context menu was added to the "Banners" and "Data feeds" pages.

[+] Add-ons: Email marketing: SEO: A context menu was added to the "Subscribers",  "SEO rules" and "301 redirects" pages.

[+] Add-ons: Stripe payments: Postal code field added to credit card form to reduce card issuer declines.

[+] Add-ons: Tags: Advanced products import: Reward points: Context menus were added.

[+] Admin Panel: The ability to select default saved search was added for the lists of products, orders, shipments, features and vendors.

[+] Core: Compatibility with PHP 7.4 was added.

[+] Core: Sessions: Cart synchronization between several browsers/devices added for logged users.

[+] Design: Blocks: Products: An ability to quickly add a product by its name was added to settings of manually filled blocks.

[+] Multi-Vendor: Add-ons: Advanced product import: Vendors and admins can now save their own files to presets without interfering with each other.

[+] Multi-Vendor: Add-ons: Stripe Connect payments: Error logging added.

[+] Multi-Vendor: Add-ons: Stripe Connect payments: Postal code field added to credit card form to reduce card issuer declines.

[+] Multi-Vendor: Orders: Invoice: Vendor details are now displayed depending on the vendor profile fields settings.

[+] Multi-Vendor: Profile fields: Vendors: Now custom profile fields can be displayed on the vendor detail page in the storefront.

[+] Multi-Vendor Ultimate: Add-ons: Data feeds: Now you can generate and export custom product feeds from a specific storefront.

[+] Orders: Shipments:  Texts & languages: A context menus were added to the "Shipments" and "Texts & languages" pages.

[+] Products: Options: Customer: User group: A context menu was added to the "Product Options" and "User Groups" pages.

[+] Shipping & taxes: Shippings: Taxes:  A context menu was added to the "Shipping methods" and "Taxes" pages.

=====================
Functionality Changes
=====================

[*] Add-ons: Google Analytics: The support of Google Analytics 4 was added.

[*] Add-ons: Message Center: Notification names in the notification settings were updated.

[*] Add-ons: Message center: Now, if a message was sent from the page of a product, order or import preset, it is easier to see this object, and to understand the context.

[*] Admin panel: Orders: The order shipping method is now selected by default when creating a detailed shipment.

[*] Export/import: States: States are placed in their own section.

[*] Export/Import: When importing products with no category, the hidden category "Products without category" will be created where new imported products will be placed.

[*] Multi-Vendor: Export/Import: If a vendor imports existing products with non-existent category, such products will be updated and left in existing categories.

[*] Multi-Vendor: Vendor panel: Storefront link in the top/bottom toolbar now routes to the vendor's microstore.

========
Bugfixes
========

[!] Add-ons: Advanced products import: Pagination for vendor presets worked incorrectly. Fixed.

[!] Add-ons: Call request: The "Buy in One Click" button did not work on the product list. Fixed.

[!] Add-ons: Comments and Reviews: Product Variations: Reviews of product with variations disappeared after changing the default variation. Fixed.

[!] Add-ons: eBay synchronization: Products were not exported to eBay due to PHP Fatal error. Fixed.

[!] Add-ons: Message Center: Notification language and language of receiver could mismatch. Fixed.

[!] Add-ons: Message center: On the sidebar of the search, the panel with the saved searches was displayed incorrectly, and there were minor bugs. Fixed.

[!] Add-ons: Newsletters: If a user tried to subscribe to a newsletter that had no mailing list, the email address wasn't saved. Fixed..

[!] Add-ons: PayPal payments: Customer couldn't place an order when specific combination of store, tax, and payment method settings was used. Fixed.

[!] Add-ons: PayPal payments: Downloadable products: A PHP error occured when buying downloadable products with PayPal. Fixed.

[!] Add-ons: Price List: Generated price list could be empty. Fixed.

[!] Add-ons: Product Variations: Export/Import: In some cases, variations were not exported. Fixed.

[!] Add-ons: Product Variations: Product variation images could not be uploaded if the "Allow own images for child variations" setting was disabled. Fixed.

[!] Add-ons: Product Variations: When saving product variations on the "Tabs" and "Layouts" tabs, a second "Save" button was appearing. Fixed.

[!] Add-ons: Product Variations: Comments and reviews: New variation creation could end up with database error. Fixed.

[!] Add-ons: RMA: Design: Accounting: Checkboxes for selecting items were displayed in a table when there were no actions for multiple selection. Fixed.

[!] Add-ons: RMA: Manual order recalculation calculated the wrong price. Fixed.

[!] Add-ons: RSS feed: Dates in the RSS feed were in the storefront language. Fixed.

[!] Add-ons: Searchanise: Import didn't work for secondary language. Fixed.

[!] Add-ons: Selecting only third-party add-ons worked incorrectly. Fixed.

[!] Add-ons: SEO: A PHP Notice could occur in some cases. Fixed.

[!] Add-ons: SEO: PHP warning occurred on product pages when product prices were hidden for unlogged users. Fixed.

[!] Add-ons: SEO: Schema.org markup showed price only for primary currency. Fixed.

[!] Add-ons: Social login: An error might occur when logging in via LinkedIn. Fixed.

[!] Add-ons: Stores and pickup points: Delivery time at the "Pickup from the store" shipping method was not shown at checkout page in some cases. Fixed.

[!] Add-ons: Warehouses [Beta]: A notification that a product appeared in stock could not been sent. Fixed.

[!] Add-ons: Watermarks: A PHP notice occured when trying to print order invoice. Fixed.

[!] Admin panel: An administrator could interact with the statuses of items in some sections, even if he did not have privileges. Fixed.

[!] Checkout: User data could be replaced with the user data of the last order the administrator edited. Fixed.

[!] Core: Settings: Add-ons: Some add-on settings couldn't be edited in the store with a single storefront. Fixed.

[!] Core: Settings: Add-ons: When opening settings of some add-ons in a multiple storefronts store, an error occured. Fixed.

[!] Design: Admin panel: The submenus were displayed incorrectly in the header of the admin panel on mobile devices and tablets. Fixed.

[!] Design: Blocks: Block names were truncated. Fixed.

[!] Design: Blocks: Products: In the Responsive theme, it was impossible to display the product block with the scroller template twice on the same page. Fixed.

[!] Design: Bottom admin toolbar: RTL: The highlighting of the active section was displayed incorrectly for RTL. Fixed.

[!] Design: Checkboxes located in one line were not at the same level. Fixed.

[!] Design: Errors occurred in the console when scrolling the carousel. Fixed.

[!] Design: Features: Advanced search had an empty block. Fixed.

[!] Design: Grid: Content alignment only worked after page reload. Fixed.

[!] Design: Notifications: In the popups, the notifications overlapped each other. Fixed.

[!] Design: Notifications: Pop-up notifications were truncated. Fixed.

[!] Design: PHP notices and warnings occurred when converting styles for right-to-left languages. Fixed.

[!] Design: Settings: There was a different distance between the checkboxes located in the column. Fixed.

[!] Design: Some table headers did not have a divider. Fixed.

[!] Design: Some tables were not mobile-friendly. Fixed.

[!] Design: Some tooltips did not have a margin. Fixed.

[!] Export/Import: Orders: Order discounts were not exported. Fixed.

[!] Export/Import: A list of layout fields was not correct after deleting selected layout. Fixed.

[!] Files: Administrators with a user group assigned couldn't chose files from the server when uploading files. Fixed.

[!] Languages: Translations: The "Update for all" button did not work. Fixed.

[!] Layouts: Pages: Selection was locked in the page layout, and pages could not be added. Fixed.

[!] Mobile application: Some texts were displayed in a wrong language. Fixed.

[!] Multi-Vendor: Add-ons: Advanced products import: Marketplace admin was not able to manage mappings for vendor preset. Fixed.

[!] Multi-Vendor: Add-ons: Direct customer-to-vendor payments: Stores and pickup points: In some cases, pickup points that did not correspond to the vendor could be displayed on the checkout page. Fixed.

[!] Multi-Vendor: Add-ons: Stripe Connect payments: Some orders couldn't be placed when the "Commission includes" add-on setting was set to "Order commission and unpaid payouts", and 3-D Secure was enabled for the payment method. Fixed.

[!] Multi-Vendor: Add-ons: Vendor locations [Beta]: After selecting a customer's location, the distance to vendors was not updated. Fixed.

[!] Multi-Vendor: Add-ons: Vendor plans: Commissions by category: Payout amount at the "Accounting page" was incorrect in cases when commission for category of bought product was different from commission in vendor's plan. Fixed.

[!] Multi-Vendor: Add-ons: Vendor-to-admin payments: Search results for vendors in the admin panel could be incorrect in some cases. Fixed.

[!] Multi-Vendor: Checkout: Errors could occur if shipping methods from different vendors were used. Fixed.

[!] Multi-Vendor: Design: Vendors: Stripe Connect payments: The vendor list was not displayed correctly with vendors connected to Stripe Connect. Fixed.

[!] Multi-Vendor: Email notifications: E-mail notifications regarding changes in the vendor profile were not sent to the receiver. Fixed.

[!] Multi-Vendor: Notifications: Email notification about new vendor account had incorrect copyright. Fixed.

[!] Multi-Vendor: Promotions: The promotion, the conditions of which were based on Shipping methods, was not applied if you place an order with products from different vendors. Fixed.

[!] Multi-Vendor: Users: Profiles: A vendor admin could enable, disable API access for the vendor admins. Fixed.

[!] Multi-Vendor: Vendors: An email about changed vendor status could come in a wrong language. Fixed.

[!] Multi-Vendor: Vendors: Balance: Hooks: It was impossible to add a column into the transactions table via template hooks. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common products for vendors: Search for products that vendors can sell returned wrong results in the admin panel. Fixed.

[!] Multi-Vendor Plus: Add-ons: Common products for vendors: Product offers were displayed in product blocks with the "Newest" filling placed on product pages. Fixed.

[!] Multi-Vendor Plus: Add-ons: Payment dependencies: Direct Customer-to-Vendor Payments: There was no way to enable vendor's payment methods for marketplace owner's shipping methods. Fixed.

[!] Multi-Vendor Plus: Add-ons: Vendor locations [Beta]: Vendor privileges: With the "Vendors: Can view only" privilege enabled, a vendor's address was not displayed in the vendor's panel. Fixed.

[!] Multi-Vendor Ultimate: Add-ons: Vendor rating: Add-on logging settings were not displayed properly in marketplaces with multiple storefronts. Fixed.

[!] Multi-Vendor Ultimate: Layouts: If the store had multiple storefronts, the layout preview opened the main storefront. Fixed.

[!] Multi-Vendor Ultimate: Storefronts: If storefronts paths were overlapped between themselves, some storefronts could be opened incorrectly. Fixed.

[!] Multi-Vendor Ultimate: Settings: The storefront switch was displayed in the sections which did not support multiple storefronts. Fixed.

[!] Multi-Vendor Ultimate: Storefronts: A vendor didn't see a storefront switcher, even when he had more than 1 storefront available. Fixed.

[!] Notifications: Email: Notifications were not sent for events with multiple receivers. Fixed.

[!] Orders: Storefronts: The assigned manager was not displayed in the order. Fixed.

[!] Performance: JS: Until the scripts were loaded, the product and order details pages was not displayed. Fixed.

[!] Product features: When changing the filter type to "Slider with numbers", the filter on the storefront did not work correctly. Fixed.

[!] Product features: When switching to the second page of feature variants, the color picker was displayed. Fixed.

[!] Product filters: Filters were not working on the brand page. Fixed.

[!] Product filters: If an unacceptable combination of filters was initially selected, then some of the filters disappeared. Fixed.

[!] Products: Features: The multiple checkbox feature field remained inactive on the "Apply values to all selected products" form on the multiple products editing page. Fixed.

[!] Products: Features: When changing the category of product, the product features of this category were not removed. Fixed.

[!] Products: Global update: When updating products in bulk, PHP Type error and Database error could occur if add-ons extending basic product functionality were used. Fixed.

[!] Products: If "Edit parent (Default template)" was selected for the detailed view of the product when creating it, an error could occur. Fixed.

[!] Products: UI: The selection of products desappeared if the cancel button was pressed in the form of multiple products editing. Fixed.

[!] Settings: Add-ons: Add-on settings section names could be loaded incorrectly in a store with multiple storefronts. Fixed.

[!] Shipping methods: Australia Post: The list of shipping services contained broken options. Fixed.

[!] Shipping methods: If the list of shipping methods was empty, the sidebar was not displayed correctly. Fixed.

[!] Shipping methods: Rates with non-whole weight values could not be saved in some cases. Fixed.

[!] Storefronts: Languages: Storefront could be created without available languages. Fixed.

[!] Storefronts: Regional redirect did not work properly if URL of a storefront partially matched the store address specified in the config. Fixed.

[!] Texts & languages: HTML code was not displayed for text in an empty category. Fixed.

[!] Theme editor: Selected fonts were not displayed properly. Fixed.

[!] TinyMCE: The values in different description fields became the same when using the TinyMCE editor. Fixed.

[!] UI / UX: When switching to other tabs, the context menu remained and worked incorrectly on the search results page. Fixed.

[!] User groups: It was possible to create a user group with no privileges. Fixed.

=============
Service Packs
=============

----------
4.12.2.SP1
----------

[!] Product features: Database error occurred when the filter type for feature was changed to "Number slider" and if the table prefix in the database was changed to something different from the default prefix. Fixed.

----------
4.12.2.SP2
----------

[!] Checkout: Signing into the account at checkout could clear the cart. Fixed.

[!] Add-ons: SEO: 302 redirect was used instead of the 301 one when redirecting customers from the URL with the main language in it. Fixed.

[!] Add-ons: SEO: If the "Show additional language in the URL" setting was enabled, the selected language could be reset to the "default" language on some pages. Fixed.

[!] Add-ons: eBay synchronization: The "Get eBay orders" action didn't appear on the list of orders. Fixed.

[!] Export/Import: If category was not specified in the import file, then the existing products were placed into the default category instead of keeping the existing category. Fixed.

